# –†—É—á–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–æ–≤

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ (–æ–¥–∏–Ω —Ä–∞–∑)

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Secrets** –≤ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏:
   - `SERVER_HOST` - IP —Å–µ—Ä–≤–µ—Ä–∞
   - `SERVER_USER` - `deployer`
   - `SERVER_SSH_KEY` - –ø—Ä–∏–≤–∞—Ç–Ω—ã–π SSH –∫–ª—é—á
   - `PLUGINS_PATH` - –ø—É—Ç—å –∫ –ø–ª–∞–≥–∏–Ω–∞–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
   - `PLUGINS_USER` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–ª—è –ø–ª–∞–≥–∏–Ω–æ–≤

2. **–°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è deployer** –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
   ```bash
   sudo useradd -m -s /bin/bash deployer
   sudo -u deployer ssh-keygen -t ed25519 -f /home/deployer/.ssh/id_ed25519 -N ""
   ```

### 2. –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Actions** –≤ –≤–∞—à–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ GitHub
2. **–í—ã–±–µ—Ä–∏—Ç–µ workflow** "Deploy Plugins"
3. **–ù–∞–∂–º–∏—Ç–µ "Run workflow"**
4. **–í—ã–±–µ—Ä–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
   - **Force rebuild**: `true` –¥–ª—è –ø–æ–ª–Ω–æ–π –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏
5. **–ù–∞–∂–º–∏—Ç–µ "Run workflow"**

## üìã –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—É—Å–∫–∞

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –ó–Ω–∞—á–µ–Ω–∏—è | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|----------|----------|----------|--------------|
| `force_rebuild` | –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –≤—Å–µ—Ö –ø–ª–∞–≥–∏–Ω–æ–≤ | `true`, `false` | `false` |

### –õ–æ–≥–∏–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:

- **–†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä `force_rebuild`
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ (push)**: 
  - `force_rebuild` = `true` (–≤—Å–µ–≥–¥–∞, –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è)

## üîÑ –í–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –ø—É—à–µ –≤ main –≤–µ—Ç–∫—É:

1. –û—Ç–∫—Ä–æ–π—Ç–µ `.github/workflows/deploy.yml`
2. –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–æ–∫–∏ –≤ –∫–æ–Ω—Ü–µ —Å–µ–∫—Ü–∏–∏ `on:`:
   ```yaml
   # –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —ç—Ç–∏ —Å—Ç—Ä–æ–∫–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏ –ø—É—à–µ:
   #   push:
   #     branches: [ main ]
   #   pull_request:
   #     branches: [ main ]
   ```

## üõ†Ô∏è –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –û–±—ã—á–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- Force rebuild: `false`

### –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞
- Force rebuild: `true`

## üîß Troubleshooting

### GitHub Action –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ Secrets –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ –≤–µ—Ç–∫–µ `main`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ workflow —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

### –ü–ª–∞–≥–∏–Ω—ã –Ω–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è
- GitHub Action –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –ø–ª–∞–≥–∏–Ω—ã –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `Force rebuild: true` –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –û—à–∏–±–∫–∏ SSH
```bash
# –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
ssh -i ~/.ssh/deploy_key deployer@SERVER_HOST
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

- [–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](workflow.md)
- [GitHub Actions Documentation](https://docs.github.com/en/actions)
- [SSH Key Setup](https://docs.github.com/en/authentication/connecting-to-github-with-ssh)
